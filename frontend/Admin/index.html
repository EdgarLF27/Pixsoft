<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PIXSOFT - Admin Dashboard</title>
    <link href="../src/output.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="h-screen overflow-hidden flex text-sm bg-linear-to-br from-slate-50 via-blue-50/20 to-emerald-50/20">

    <!-- Sidebar -->
    <div id="sidebar-container"></div>

    <!-- Main Content -->
    <main class="flex-1 flex flex-col h-full overflow-hidden relative">
        <!-- Mobile Header -->
        <header class="md:hidden h-16 flex items-center justify-between px-4 bg-white/80 backdrop-blur-md z-40">
            <button id="menu-btn" class="text-slate-600 hover:text-slate-900">
                <i class="fa-solid fa-bars text-xl"></i>
            </button>
            <span class="font-bold text-slate-900">PIXSOFT Admin</span>
            <div class="w-8"></div> <!-- Spacer -->
        </header>

        <div class="flex-1 overflow-y-auto p-4 md:p-8 scroll-smooth">

            <!-- KPI Cards -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <!-- Card 1 - Ingresos Totales -->
                <div class="card-gradient-1 rounded-2xl p-6 relative overflow-hidden shadow-soft hover-lift">
                    <div class="absolute -right-8 -top-8 w-32 h-32 bg-white/10 rounded-full blur-xl"></div>
                    <div class="relative z-10">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <p class="text-white/80 text-xs font-medium uppercase tracking-wider">Ingresos Totales
                                </p>
                                <h3 class="text-2xl font-bold text-white mt-1" id="total-revenue">$0</h3>
                            </div>
                            <div class="p-3 rounded-xl glass-effect text-white">
                                <i class="fa-solid fa-dollar-sign text-lg"></i>
                            </div>
                        </div>
                        <div class="flex items-center gap-2 text-xs">
                            <span class="px-2 py-1 rounded-full bg-white/20 text-white flex items-center gap-1">
                                <i class="fa-solid fa-database mr-1"></i>
                                <span id="revenue-source">Cargando...</span>
                            </span>
                            <span class="text-white/80">Datos reales del sistema</span>
                        </div>
                    </div>
                </div>

                <!-- Card 2 - Órdenes -->
                <div class="card-gradient-2 rounded-2xl p-6 relative overflow-hidden shadow-soft hover-lift">
                    <div class="absolute -right-8 -top-8 w-32 h-32 bg-white/10 rounded-full blur-xl"></div>
                    <div class="relative z-10">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <p class="text-white/80 text-xs font-medium uppercase tracking-wider">Total Órdenes</p>
                                <h3 class="text-2xl font-bold text-white mt-1" id="total-orders">0</h3>
                            </div>
                            <div class="p-3 rounded-xl glass-effect text-white">
                                <i class="fa-solid fa-cart-shopping text-lg"></i>
                            </div>
                        </div>
                        <div class="flex items-center gap-2 text-xs">
                            <span class="px-2 py-1 rounded-full bg-white/20 text-white flex items-center gap-1">
                                <i class="fa-solid fa-database mr-1"></i>
                                <span id="orders-source">Cargando...</span>
                            </span>
                            <span class="text-white/80">Datos reales del sistema</span>
                        </div>
                    </div>
                </div>

                <!-- Card 3 - Productos -->
                <div class="card-gradient-3 rounded-2xl p-6 relative overflow-hidden shadow-soft hover-lift">
                    <div class="absolute -right-8 -top-8 w-32 h-32 bg-white/10 rounded-full blur-xl"></div>
                    <div class="relative z-10">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <p class="text-white/80 text-xs font-medium uppercase tracking-wider">Productos Activos
                                </p>
                                <h3 class="text-2xl font-bold text-white mt-1" id="total-products">0</h3>
                            </div>
                            <div class="p-3 rounded-xl glass-effect text-white">
                                <i class="fa-solid fa-box text-lg"></i>
                            </div>
                        </div>
                        <div class="flex items-center gap-2 text-xs">
                            <span class="px-2 py-1 rounded-full bg-white/20 text-white flex items-center gap-1">
                                <i class="fa-solid fa-database mr-1"></i>
                                <span id="products-source">Cargando...</span>
                            </span>
                            <span class="text-white/80">Datos reales del sistema</span>
                        </div>
                    </div>
                </div>

                <!-- Card 4 - Clientes -->
                <div class="card-gradient-4 rounded-2xl p-6 relative overflow-hidden shadow-soft hover-lift">
                    <div class="absolute -right-8 -top-8 w-32 h-32 bg-white/10 rounded-full blur-xl"></div>
                    <div class="relative z-10">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <p class="text-white/80 text-xs font-medium uppercase tracking-wider">Clientes Activos
                                </p>
                                <h3 class="text-2xl font-bold text-white mt-1" id="total-clients">0</h3>
                            </div>
                            <div class="p-3 rounded-xl glass-effect text-white">
                                <i class="fa-solid fa-users text-lg"></i>
                            </div>
                        </div>
                        <div class="flex items-center gap-2 text-xs">
                            <span class="px-2 py-1 rounded-full bg-white/20 text-white flex items-center gap-1">
                                <i class="fa-solid fa-database mr-1"></i>
                                <span id="clients-source">Cargando...</span>
                            </span>
                            <span class="text-white/80">Datos reales del sistema</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                <!-- Chart 1 - Productos por Categoría -->
                <div class="bg-white rounded-2xl p-6 relative overflow-hidden shadow-soft">
                    <div class="absolute -right-10 -top-10 w-40 h-40 chart-gradient-3/10 rounded-full blur-xl"></div>
                    <div class="relative z-10">
                        <div class="flex items-center justify-between mb-6">
                            <div>
                                <h3 class="text-lg font-bold text-slate-900">Productos por Categoría</h3>
                                <p class="text-slate-500 text-sm mt-1">
                                    <i class="fa-solid fa-database mr-1 text-blue-500"></i>
                                    <strong>Datos en tiempo real:</strong> Distribución de productos en el catálogo
                                    obtenida directamente de la API de productos.
                                    Última actualización: <span id="last-categories-update"
                                        class="font-medium">hoy</span>
                                </p>
                            </div>
                            <div class="px-3 py-1 rounded-lg chart-gradient-3 text-white text-xs font-medium">
                                <i class="fa-solid fa-layer-group mr-1"></i> Categorías
                            </div>
                        </div>
                        <div class="relative h-64">
                            <canvas id="productsByCategoryChart"></canvas>
                        </div>
                        <div class="mt-4 flex items-center justify-between" id="categories-stats">
                            <div class="flex items-center gap-2">
                                <i class="fa-solid fa-database text-blue-500"></i>
                                <p class="text-slate-500 text-sm" id="categories-data-source">Cargando datos reales...
                                </p>
                            </div>
                            <button onclick="refreshProductsData()"
                                class="text-xs text-blue-600 hover:text-blue-800 font-medium">
                                <i class="fa-solid fa-rotate-right mr-1"></i> Actualizar ahora
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Chart 2 - Rendimiento Mensual -->
                <div class="bg-white rounded-2xl p-6 relative overflow-hidden shadow-soft">
                    <div class="absolute -right-20 -top-20 w-60 h-60 chart-gradient/10 rounded-full blur-2xl"></div>
                    <div class="relative z-10">
                        <div class="flex items-center justify-between mb-6">
                            <div>
                                <h3 class="text-lg font-bold text-slate-900">Rendimiento Mensual</h3>
                                <p class="text-slate-500 text-sm mt-1">
                                    <i class="fa-solid fa-database mr-1 text-purple-500"></i>
                                    <strong>Fuente de datos:</strong> Análisis de órdenes procesadas en los últimos 6
                                    meses.
                                    Datos extraídos de <code class="text-xs">/api/v1/orders/orders/</code>
                                </p>
                            </div>
                            <div class="flex items-center gap-2">
                                <div class="flex items-center gap-1">
                                    <span class="w-2 h-2 rounded-full chart-gradient"></span>
                                    <span class="text-xs text-slate-600">Ingresos</span>
                                </div>
                                <div class="flex items-center gap-1 ml-3">
                                    <span class="w-2 h-2 rounded-full chart-gradient-2"></span>
                                    <span class="text-xs text-slate-600">Órdenes</span>
                                </div>
                            </div>
                        </div>
                        <div class="relative h-64">
                            <canvas id="performanceChart"></canvas>
                        </div>
                        <div class="mt-4 grid grid-cols-2 md:grid-cols-4 gap-4" id="performance-stats">
                            <div
                                class="p-3 rounded-xl bg-linear-to-br from-blue-50 to-cyan-50/50 border border-blue-100">
                                <p class="text-slate-500 text-xs">
                                    <i class="fa-solid fa-money-bill-wave mr-1"></i>
                                    Ingreso Promedio
                                </p>
                                <p class="text-lg font-bold text-slate-900" id="avg-revenue">$0</p>
                            </div>
                            <div
                                class="p-3 rounded-xl bg-linear-to-br from-emerald-50 to-teal-50/50 border border-emerald-100">
                                <p class="text-slate-500 text-xs">
                                    <i class="fa-solid fa-chart-line mr-1"></i>
                                    Órdenes/Mes
                                </p>
                                <p class="text-lg font-bold text-slate-900" id="avg-orders">0</p>
                            </div>
                            <div
                                class="p-3 rounded-xl bg-linear-to-br from-purple-50 to-pink-50/50 border border-purple-100">
                                <p class="text-slate-500 text-xs">
                                    <i class="fa-solid fa-trend-up mr-1"></i>
                                    Crecimiento
                                </p>
                                <p class="text-lg font-bold text-slate-900" id="growth-rate">0%</p>
                            </div>
                            <div
                                class="p-3 rounded-xl bg-linear-to-br from-amber-50 to-orange-50/50 border border-amber-100">
                                <p class="text-slate-500 text-xs">
                                    <i class="fa-solid fa-trophy mr-1"></i>
                                    Mejor Mes
                                </p>
                                <p class="text-lg font-bold text-slate-900" id="best-month">-</p>
                            </div>
                        </div>
                        <div class="mt-4 text-center">
                            <p class="text-xs text-slate-500">
                                <i class="fa-solid fa-circle-info mr-1"></i>
                                Datos calculados a partir de órdenes reales del sistema PIXSOFT
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Stats -->
            <div class="bg-white rounded-2xl p-6 shadow-soft mb-8">
                <h3 class="text-lg font-bold text-slate-900 mb-6">Resumen Rápido</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="p-4 rounded-xl bg-linear-to-br from-blue-50 to-blue-100/50 border border-blue-200">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-slate-700 font-medium">Stock Bajo</span>
                            <i class="fa-solid fa-database text-blue-500"></i>
                        </div>
                        <p class="text-2xl font-bold text-slate-900" id="low-stock-count">0</p>
                        <p class="text-slate-500 text-xs mt-1">
                            Datos reales: productos con menos de 10 unidades en inventario
                        </p>
                    </div>

                    <div
                        class="p-4 rounded-xl bg-linear-to-br from-emerald-50 to-emerald-100/50 border border-emerald-200">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-slate-700 font-medium">Órdenes Pendientes</span>
                            <i class="fa-solid fa-database text-emerald-500"></i>
                        </div>
                        <p class="text-2xl font-bold text-slate-900" id="pending-orders">0</p>
                        <p class="text-slate-500 text-xs mt-1">
                            Datos en tiempo real del endpoint de órdenes
                        </p>
                    </div>

                    <div
                        class="p-4 rounded-xl bg-linear-to-br from-purple-50 to-purple-100/50 border border-purple-200">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-slate-700 font-medium">Actividad Hoy</span>
                            <i class="fa-solid fa-database text-purple-500"></i>
                        </div>
                        <div class="flex items-baseline gap-3">
                            <p class="text-2xl font-bold text-slate-900" id="new-today">0</p>
                            <span class="text-sm text-slate-500">
                                órdenes creadas hoy
                                <span class="text-xs block" id="today-date"></span>
                            </span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Data Status -->
            <div class="bg-white rounded-2xl p-6 shadow-soft">
                <h3 class="text-lg font-bold text-slate-900 mb-4">Estado de los Datos</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="p-3 rounded-lg bg-slate-50 border border-slate-200">
                        <div class="flex items-center gap-3">
                            <div id="products-status" class="w-3 h-3 rounded-full bg-yellow-500 animate-pulse"></div>
                            <div>
                                <p class="font-medium text-slate-700">API Productos</p>
                                <p class="text-xs text-slate-500" id="products-status-text">Conectando...</p>
                            </div>
                        </div>
                    </div>
                    <div class="p-3 rounded-lg bg-slate-50 border border-slate-200">
                        <div class="flex items-center gap-3">
                            <div id="orders-status" class="w-3 h-3 rounded-full bg-yellow-500 animate-pulse"></div>
                            <div>
                                <p class="font-medium text-slate-700">API Órdenes</p>
                                <p class="text-xs text-slate-500" id="orders-status-text">Conectando...</p>
                            </div>
                        </div>
                    </div>
                    <div class="p-3 rounded-lg bg-slate-50 border border-slate-200">
                        <div class="flex items-center gap-3">
                            <div id="users-status" class="w-3 h-3 rounded-full bg-yellow-500 animate-pulse"></div>
                            <div>
                                <p class="font-medium text-slate-700">API Usuarios</p>
                                <p class="text-xs text-slate-500" id="users-status-text">Conectando...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <!-- Loading Animation -->
    <div id="loading" class="fixed inset-0 bg-white/90 backdrop-blur-sm z-50 items-center justify-center hidden flex">
        <div class="text-center">
            <div class="relative w-20 h-20 mx-auto mb-4">
                <div class="absolute inset-0 rounded-full border-4 border-blue-200 animate-pulse"></div>
                <div class="absolute inset-2 rounded-full border-4 border-transparent border-t-blue-500 animate-spin">
                </div>
                <!-- <div class="absolute inset-4 rounded-full bg-linear-to-r from-blue-500 to-cyan-500 opacity-20"></div> -->
            </div>
            <p class="text-slate-700 font-medium">Cargando datos del sistema...</p>
            <p class="text-slate-500 text-sm mt-1">Conectando con PIXSOFT API</p>
        </div>
    </div>

    <!-- Scripts -->
    <script src="../js/components/sidebar.js"></script>
    <script src="../js/components/toast.js"></script>
    <script src="../js/utils/api.js"></script>
    <script src="../js/utils/formatting.js"></script>
    <script src="../js/indexAdmin.js"></script>

</body>

</html>

</body>

</html>